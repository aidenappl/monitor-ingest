commands:
  - name: build
    description: Build the binary
    run: go build -o bin/monitor-core .
  - name: run
    description: Run the application
    run: source .env 2>/dev/null; go run .
  - name: test
    description: Run tests
    run: go test ./...
  - name: fmt
    description: Format code
    run: gofmt -w -s .
  - name: vet
    description: Run go vet
    run: go vet ./...
  - name: check
    description: Run all checks (format, vet, test)
    run: gofmt -w -s . && go vet ./... && go test ./...
  - name: tidy
    description: Tidy dependencies
    run: go mod tidy
  - name: up
    description: Start local ClickHouse
    run: docker-compose -f docker-compose.dev.yml up -d
  - name: down
    description: Stop local ClickHouse
    run: docker-compose -f docker-compose.dev.yml down
  - name: logs
    description: View local ClickHouse logs
    run: docker-compose -f docker-compose.dev.yml logs -f
  - name: migrate
    description: Run migrations against local ClickHouse
    run: for f in migrations/*.sql; do clickhouse-client --host localhost < "$f"; done
